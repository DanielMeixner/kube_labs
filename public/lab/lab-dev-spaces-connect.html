<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>10-minute Quick start: Improve debugging experience using Dev Spaces Connect | Kube Labs</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="apple-touch-icon" sizes="57x57" href="/kube_labs/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/kube_labs/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/kube_labs/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/kube_labs/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/kube_labs/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/kube_labs/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/kube_labs/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/kube_labs/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/kube_labs/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/kube_labs/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/kube_labs/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/kube_labs/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/kube_labs/favicon-16x16.png">
  <link rel="manifest" href="/kube_labs/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <script async="true" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    
    <link rel="preload" href="/kube_labs/assets/css/0.styles.c0e6fa06.css" as="style"><link rel="preload" href="/kube_labs/assets/js/app.b33a5d98.js" as="script"><link rel="preload" href="/kube_labs/assets/js/3.90ca96aa.js" as="script"><link rel="preload" href="/kube_labs/assets/js/17.fefefc54.js" as="script"><link rel="prefetch" href="/kube_labs/assets/js/10.93185009.js"><link rel="prefetch" href="/kube_labs/assets/js/11.b4c69ef2.js"><link rel="prefetch" href="/kube_labs/assets/js/12.ef255ee6.js"><link rel="prefetch" href="/kube_labs/assets/js/13.f45761f9.js"><link rel="prefetch" href="/kube_labs/assets/js/14.e702dcc9.js"><link rel="prefetch" href="/kube_labs/assets/js/15.cdb1e8d4.js"><link rel="prefetch" href="/kube_labs/assets/js/16.3e581e5c.js"><link rel="prefetch" href="/kube_labs/assets/js/18.aab75bc5.js"><link rel="prefetch" href="/kube_labs/assets/js/19.09b9f9a2.js"><link rel="prefetch" href="/kube_labs/assets/js/4.45335c2e.js"><link rel="prefetch" href="/kube_labs/assets/js/5.389b2288.js"><link rel="prefetch" href="/kube_labs/assets/js/6.860c6127.js"><link rel="prefetch" href="/kube_labs/assets/js/7.5b82a47d.js"><link rel="prefetch" href="/kube_labs/assets/js/8.82802706.js"><link rel="prefetch" href="/kube_labs/assets/js/9.e9551f59.js"><link rel="prefetch" href="/kube_labs/assets/js/vendors~docsearch.5d51957c.js">
    <link rel="stylesheet" href="/kube_labs/assets/css/0.styles.c0e6fa06.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/kube_labs/" class="home-link router-link-active"><img src="/kube_labs/files/vintage.png" alt="Kube Labs" class="logo"> <span class="site-name can-hide">Kube Labs</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/kube_labs/" class="nav-link">Home</a></div><div class="nav-item"><a href="http://videos.azuredev.tips" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Videos
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://twitch.tv/mbcrump" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Developer Live Streaming
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/Microsoft/AzureTipsAndTricks/issues/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Questions?
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://microsoft.github.io/AzureTipsAndTricks/rss.xml" class="nav-link">
  RSS Feed
</a></div> <a href="https://github.com/danielmeixner/kube_labs" target="_blank" rel="noopener noreferrer" class="repo-link">
    Star this Repo
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/kube_labs/" class="nav-link">Home</a></div><div class="nav-item"><a href="http://videos.azuredev.tips" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Videos
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://twitch.tv/mbcrump" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Developer Live Streaming
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/Microsoft/AzureTipsAndTricks/issues/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Questions?
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://microsoft.github.io/AzureTipsAndTricks/rss.xml" class="nav-link">
  RSS Feed
</a></div> <a href="https://github.com/danielmeixner/kube_labs" target="_blank" rel="noopener noreferrer" class="repo-link">
    Star this Repo
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>Home</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/kube_labs/" class="sidebar-link">/</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kube_labs/#title-welcometype-post" class="sidebar-link">&lt;!-- ---
title: Welcome
type: post</a></li><li class="sidebar-sub-header"><a href="/kube_labs/#site-map" class="sidebar-link">Site Map</a></li><li class="sidebar-sub-header"><a href="/kube_labs/#git-workflow" class="sidebar-link">Git Workflow</a></li><li class="sidebar-sub-header"><a href="/kube_labs/#contributing" class="sidebar-link">Contributing</a></li><li class="sidebar-sub-header"><a href="/kube_labs/#legal-notices" class="sidebar-link">Legal Notices</a></li></ul></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Tips</span> <!----></p> <ul class="sidebar-group-items"></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>Recently Added</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/kube_labs/lab/lab-dev-spaces-connect.html" class="active sidebar-link">10-minute Quick start: Improve debugging experience using Dev Spaces Connect</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kube_labs/lab/lab-dev-spaces-connect.html#objective-of-the-lab" class="sidebar-link">Objective of the lab:</a></li><li class="sidebar-sub-header"><a href="/kube_labs/lab/lab-dev-spaces-connect.html#prerequisites" class="sidebar-link">Prerequisites</a></li><li class="sidebar-sub-header"><a href="/kube_labs/lab/lab-dev-spaces-connect.html#_1-deploy-the-sample-application" class="sidebar-link">1. Deploy the sample application</a></li><li class="sidebar-sub-header"><a href="/kube_labs/lab/lab-dev-spaces-connect.html#_2-visit-the-currently-running-application" class="sidebar-link">2. Visit the currently running application</a></li><li class="sidebar-sub-header"><a href="/kube_labs/lab/lab-dev-spaces-connect.html#_3-modify-the-source-code-of-your-current-application" class="sidebar-link">3. Modify the source code of your current application</a></li><li class="sidebar-sub-header"><a href="/kube_labs/lab/lab-dev-spaces-connect.html#_4-configure-aks-to-redirect-to-your-developer-machine" class="sidebar-link">4. Configure AKS to redirect to your developer machine</a></li><li class="sidebar-sub-header"><a href="/kube_labs/lab/lab-dev-spaces-connect.html#what-we-ve-seen" class="sidebar-link">What we've seen</a></li><li class="sidebar-sub-header"><a href="/kube_labs/lab/lab-dev-spaces-connect.html#learn-more" class="sidebar-link">Learn more</a></li></ul></li><li><a href="/kube_labs/blog/tip256.html" class="sidebar-link">Tip 256 - Using Application Gateway Ingress Controller with Azure Kubernetes Service (AKS)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/kube_labs/blog/tip255.html" class="sidebar-link">Tip 255 - What's Azure Private Link and how can I get started?</a></li><li><a href="/kube_labs/lab/lab.html" class="sidebar-link">/lab/lab.html</a></li></ul></div></li></ul> </div> <div class="page" data-v-e0004534> <div class="content__default" data-v-e0004534><h1 id="_10-minute-quick-start-improve-debugging-experience-using-dev-spaces-connect"><a href="#_10-minute-quick-start-improve-debugging-experience-using-dev-spaces-connect" class="header-anchor">#</a> 10-minute Quick start: Improve debugging experience using Dev Spaces Connect</h1> <h2 id="objective-of-the-lab"><a href="#objective-of-the-lab" class="header-anchor">#</a> Objective of the lab:</h2> <p>Dev Spaces Connect provides a workflow which embeds local running applications under development into a chain of requests inside a Kubernates cluster running in AKS. This allows for easier debugging and speeds up your inner loop because there is no need to build and push docker images to try our your application in the context of a cluster.</p> <p><img src="assets/lab-dev-spaces-connect/scribble.png" alt="Workflow"></p> <h2 id="prerequisites"><a href="#prerequisites" class="header-anchor">#</a> Prerequisites</h2> <ol><li><p>Deploy an AKS cluster, set up azure cli and configure kubectl to connect to your cluster following this guide:
https://docs.microsoft.com/en-us/azure/aks/kubernetes-walkthrough</p></li> <li><p>Install and configure Azure Dev Spaces for your cluster and connect with your local Azure Dev Spaces tooling (azds) to it using the default namespace following this guide: https://docs.microsoft.com/en-us/azure/dev-spaces/how-to/install-dev-spaces</p></li> <li><p>Install the Azure Dev Spaces extension for Visual Studio Code. https://marketplace.visualstudio.com/items?itemName=azuredevspaces.azds</p></li> <li><p>Install <a href="https://code.visualstudio.com/" target="_blank" rel="noopener noreferrer">Visual Studio Code<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></li> <li><p>Install <a href="https://nodejs.org/en/" target="_blank" rel="noopener noreferrer">NodeJS and NPM<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to run the demo application.</p></li></ol> <h2 id="_1-deploy-the-sample-application"><a href="#_1-deploy-the-sample-application" class="header-anchor">#</a> 1. Deploy the sample application</h2> <ol><li><p>The sourcecode for the sample application is located here: https://github.com/DanielMeixner/DebugContainer</p></li> <li><p>Deploy the sample appliction using the following yaml file</p></li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>kubectl apply –f https://raw.githubusercontent.com/DanielMeixner/DebugContainer/master/yamls/red-green-yellow.yaml 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_2-visit-the-currently-running-application"><a href="#_2-visit-the-currently-running-application" class="header-anchor">#</a> 2. Visit the currently running application</h2> <ol><li>Check out the services and pods running in the default namespace of your cluster.</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>kubectl get services
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol><li><p>The result will look something like this.
<img src="assets/lab-dev-spaces-connect/services.png" alt="Result auf kubectl get services command"> <strong>Hint</strong>: <em>Don't be confused by the fact that all three services have external IPs. This is just for demo purposes to give direct access to instances if you want to investigate further. For this demo to work a single external IP on svca would be good enough.</em></p></li> <li><p>Notices the external IP for svca.</p> <p><strong>Hint</strong>: <em>If you don't find an external IP for svca and instead find &quot;pending&quot; wait a little and run kubectl get services again. Allocation of IP addresses can take moment.</em></p></li> <li><p>Open a browser and navigate to http://EXTERNAL-IP-OF-SERVICE-A/api/cascade .</p></li> <li><p>The result should look like below.</p></li></ol> <p><img src="assets/lab-dev-spaces-connect/redgreenyellow.png" alt="Default result"></p> <p><strong>Hint:</strong> <em>Notice this visualization represents the chain of microservices which have been called: You triggered the red service (svca) which is in the backend calling the green service (svcb) which is then calling the yellow service (svc). All responses combined are used to build up the visualization.</em></p> <h2 id="_3-modify-the-source-code-of-your-current-application"><a href="#_3-modify-the-source-code-of-your-current-application" class="header-anchor">#</a> 3. Modify the source code of your current application</h2> <ol><li><p>As a developer you want to modify svcb. Clone the repository down to your machine using this command:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>git clone https://github.com/DanielMeixner/DebugContainer 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>Open the folder &quot;DebugContainer&quot;  in Visual Studio Code.</p></li> <li><p>Modify the application. To keep things really simple, modify it to be purple instead of green. The color is being taken from an environment variable called COLOR.</p></li> <li><p>In Visual Studio Code open up the terminal (can be done in the menu by hitting Terminal --&gt; New Terminal) and run “SET COLOR=purple” to set the environment variable.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>SET COLOR=purple 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>The port of the app is configured via environment variable as well. Run this command to set it to 8081.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>SET MYPORT=8081 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>To test this configuration run your application locally</p></li> <li><p>Get the dependencies for the demo app using npm.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm install
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>Then run the app.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>node server.js
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>The application starts up locally. When you open your browser and navigate to your app on http://localhost:8081 the app will simply display a simple purple website - the color was taken from your configuration.</p></li> <li><p>Stop the local running application by hitting Ctrl+C in the terminal.</p></li></ol> <h2 id="_4-configure-aks-to-redirect-to-your-developer-machine"><a href="#_4-configure-aks-to-redirect-to-your-developer-machine" class="header-anchor">#</a> 4. Configure AKS to redirect to your developer machine</h2> <ol><li><p>While your application is working stand alone you can’t really be sure that it behaves as expected when being called from another service or when calling dependencies. What you want to have is an environment where you can do both accept incoming calls to your application and send outgoing requests  from your application without the need for any kind of mocking - you want to be  embedeed into a flow of actual running microservices. This is what we are going to do next.</p></li> <li><p><strong>[WINDOWS ONLY]</strong>  If you are running on Windows make sure you stop and disable the branchcache service if it is running. To do so press the windows key, type msc and hit return. In the Services dialog find the entry “BranchCache”. Right-click it, select properties.</p></li> <li><p><strong>[WINDOWS ONLY]</strong> Set Startup type to “disabled” and hit “apply” to avoid an auto restart of the service.</p></li> <li><p><strong>[WINDOWS ONLY]</strong> Then hit “Stop” to stop the service.</p> <p><img src="assets/lab-dev-spaces-connect/branchcache.png" alt="Services Dialog"></p></li> <li><p>Hit F1 in Visual Studio Code and run the command Azure <em>Dev Spaces: Redirect an existing Kubernetes service to my machine</em>.</p> <p><img src="assets/lab-dev-spaces-connect/connect.png" alt="Connect dialog in VSC"></p></li> <li><p>When asked for a service to redirect choose <em><strong>svcb</strong></em> - we want to embed our local running service into a chain of commands instead of <em><strong>svcb</strong></em>.</p></li> <li><p>When asked for mode select <em>replace</em> - we want to redirect the traffic which is targeting svcb in the cluster to our machine.</p></li> <li><p>When asked for a port to redirect choose <em><strong>8081</strong></em>. This is our  local port where our local running application will be listening.</p></li> <li><p><strong>[WINDOWS ONLY]</strong>  On Windows you might be asked to confirm the execution of azds via dialog. This is required because the local hosts file will be modified.</p></li> <li><p>It will take a few seconds and a new terminal will open in Visual Studio Code. This terminal is configured to work seamless with Azure Dev Spaces. You will find a lot of environment variables have been set in there already.</p></li> <li><p>Provide some environment variables to configure the behaviour of our local application.We specify the color again and also specify information about the endpoint which shall be called by your local service.
In this case we are configuring the application to call an endpoint on http://svcc:80/api/whoareu .
Excute these commands in the terminal which has been opened automatically. (It's important to use this terminal and not another terminal for Dev Spaces Connect to work correctly.)</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>SET SERVICEENDPOINTHOST=svcc
SET SERVICEENDPOINTPATH=/api/whoareu
SET SERVICEENDPOINTPORT=80
SET MYPORT=8081
SET COLOR=purple
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>As you can see the configuration is using an endpoint which is actually only valid inside of your AKS cluster – the hostname <em><strong>svcc</strong></em> typically doesn't resolve anywhere else. Because we are using the Azure Dev Spaces tooling the name of this backend endpoint will resolve correctly.</p></li> <li><p>Start the application in this terminal running “node server.js” in the same terminal.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>node server.js
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>The client-side Azure Dev Spaces tooling will modify your machine in a way that traffic from within this terminal will be redirected to your cluster and name resolution of Kubernetes services will also work. Azure Dev Spaces server side tooling will make sure traffic towards <em><strong>svcb</strong></em> will be forwarded to your local developer machine.</p></li> <li><p>Open up the browser again with the public IP from svca, (http://PUBLIC-IP-OF-SERVICE-A&gt;/api/cascade ) You should be able to see a vizualisation like this which proves your application running locally is now part of a chain of requests in AKS. As you see on the website your choice of color impacted the result and therefore proves that the traffic has been routed from AKS to your machine and back into the cluster.</p> <p><img src="assets/lab-dev-spaces-connect/redpurplegyellow.png" alt="Modified Result"></p></li> <li><p>To disconnect your local machine from the cluster hit F1 in VSC and select Azure Dev Spaces: Disconnect current session.</p></li></ol> <h2 id="what-we-ve-seen"><a href="#what-we-ve-seen" class="header-anchor">#</a> What we've seen</h2> <p>In this tutorial we've seen how Dev Spaces Connect can help to speed up development of Kubernetes applications by allowing to integrate your developmer machine into the chain of requests in a microservices based application. This reduces the need for docker build/push loops and deployments to the cluster during development while you can continue to use your local developer tooling and debuggers.</p> <h2 id="learn-more"><a href="#learn-more" class="header-anchor">#</a> Learn more</h2> <p>If you are interested in learning more check out these links:</p> <ul><li>General Overview for Dev Spaces
http://aka.ms/devspaces</li> <li>Setup of Dev Spaces Connect in detail https://docs.microsoft.com/en-us/azure/dev-spaces/how-to/connect</li> <li>How Dev Spaces works
https://docs.microsoft.com/en-us/azure/dev-spaces/how-dev-spaces-works</li> <li>Dev Spaces Video https://www.youtube.com/watch?v=brhxU_kt2HI</li></ul></div> <div class="page-edit" data-v-e0004534><div class="edit-link" data-v-e0004534><a href="https://github.com/danielmeixner/kube_labs/edit/master/lab/lab-dev-spaces-connect.md" target="_blank" rel="noopener noreferrer" data-v-e0004534>Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound" data-v-e0004534 data-v-e0004534><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <section class="share" data-v-e0004534><h2 data-v-e0004534>Share</h2> <a href="https://twitter.com/intent/tweet?text=10-minute Quick start: Improve debugging experience using Dev Spaces Connect by @mbcrump undefined/lab/lab-dev-spaces-connect.html" target="_blank" class="share__button" data-v-e0004534><i class="fab fa-twitter" data-v-e0004534></i> Tweet
    </a></section></div> <!----></div> <div class="page-nav" data-v-e0004534><p class="inner" data-v-e0004534><span class="prev" data-v-e0004534>
        ←
        <a href="/kube_labs/" class="prev router-link-active" data-v-e0004534>
          /
        </a></span> <span class="next" data-v-e0004534><a href="/kube_labs/blog/tip256.html" data-v-e0004534>
          Tip 256 - Using Application Gateway Ingress Controller with Azure Kubernetes Service (AKS)
        </a>
        →
      </span></p></div> </div> <!----></div><div class="global-ui"></div></div>
    <script src="/kube_labs/assets/js/app.b33a5d98.js" defer></script><script src="/kube_labs/assets/js/3.90ca96aa.js" defer></script><script src="/kube_labs/assets/js/17.fefefc54.js" defer></script>
  </body>
</html>
