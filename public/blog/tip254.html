<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Tip 254 - Use WAF to protect your web applications with Azure Front Door | Kube Labs</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="apple-touch-icon" sizes="57x57" href="/kube_labs/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/kube_labs/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/kube_labs/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/kube_labs/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/kube_labs/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/kube_labs/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/kube_labs/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/kube_labs/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/kube_labs/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/kube_labs/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/kube_labs/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/kube_labs/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/kube_labs/favicon-16x16.png">
  <link rel="manifest" href="/kube_labs/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <script async="true" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    
    <link rel="preload" href="/kube_labs/assets/css/0.styles.c0e6fa06.css" as="style"><link rel="preload" href="/kube_labs/assets/js/app.b33a5d98.js" as="script"><link rel="preload" href="/kube_labs/assets/js/3.90ca96aa.js" as="script"><link rel="preload" href="/kube_labs/assets/js/13.f45761f9.js" as="script"><link rel="prefetch" href="/kube_labs/assets/js/10.93185009.js"><link rel="prefetch" href="/kube_labs/assets/js/11.b4c69ef2.js"><link rel="prefetch" href="/kube_labs/assets/js/12.ef255ee6.js"><link rel="prefetch" href="/kube_labs/assets/js/14.e702dcc9.js"><link rel="prefetch" href="/kube_labs/assets/js/15.cdb1e8d4.js"><link rel="prefetch" href="/kube_labs/assets/js/16.3e581e5c.js"><link rel="prefetch" href="/kube_labs/assets/js/17.fefefc54.js"><link rel="prefetch" href="/kube_labs/assets/js/18.aab75bc5.js"><link rel="prefetch" href="/kube_labs/assets/js/19.09b9f9a2.js"><link rel="prefetch" href="/kube_labs/assets/js/4.45335c2e.js"><link rel="prefetch" href="/kube_labs/assets/js/5.389b2288.js"><link rel="prefetch" href="/kube_labs/assets/js/6.860c6127.js"><link rel="prefetch" href="/kube_labs/assets/js/7.5b82a47d.js"><link rel="prefetch" href="/kube_labs/assets/js/8.82802706.js"><link rel="prefetch" href="/kube_labs/assets/js/9.e9551f59.js"><link rel="prefetch" href="/kube_labs/assets/js/vendors~docsearch.5d51957c.js">
    <link rel="stylesheet" href="/kube_labs/assets/css/0.styles.c0e6fa06.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/kube_labs/" class="home-link router-link-active"><img src="/kube_labs/files/vintage.png" alt="Kube Labs" class="logo"> <span class="site-name can-hide">Kube Labs</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/kube_labs/" class="nav-link">Home</a></div><div class="nav-item"><a href="http://videos.azuredev.tips" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Videos
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://twitch.tv/mbcrump" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Developer Live Streaming
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/Microsoft/AzureTipsAndTricks/issues/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Questions?
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://microsoft.github.io/AzureTipsAndTricks/rss.xml" class="nav-link">
  RSS Feed
</a></div> <a href="https://github.com/danielmeixner/kube_labs" target="_blank" rel="noopener noreferrer" class="repo-link">
    Star this Repo
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/kube_labs/" class="nav-link">Home</a></div><div class="nav-item"><a href="http://videos.azuredev.tips" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Videos
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://twitch.tv/mbcrump" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Developer Live Streaming
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/Microsoft/AzureTipsAndTricks/issues/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Questions?
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://microsoft.github.io/AzureTipsAndTricks/rss.xml" class="nav-link">
  RSS Feed
</a></div> <a href="https://github.com/danielmeixner/kube_labs" target="_blank" rel="noopener noreferrer" class="repo-link">
    Star this Repo
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Home</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/kube_labs/" class="sidebar-link">/</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kube_labs/#title-welcometype-post" class="sidebar-link">&lt;!-- ---
title: Welcome
type: post</a></li><li class="sidebar-sub-header"><a href="/kube_labs/#site-map" class="sidebar-link">Site Map</a></li><li class="sidebar-sub-header"><a href="/kube_labs/#git-workflow" class="sidebar-link">Git Workflow</a></li><li class="sidebar-sub-header"><a href="/kube_labs/#contributing" class="sidebar-link">Contributing</a></li><li class="sidebar-sub-header"><a href="/kube_labs/#legal-notices" class="sidebar-link">Legal Notices</a></li></ul></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Tips</span> <!----></p> <ul class="sidebar-group-items"></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Recently Added</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/kube_labs/lab/lab-dev-spaces-connect.html" class="sidebar-link">10-minute Quick start: Improve debugging experience using Dev Spaces Connect</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/kube_labs/lab/lab-dev-spaces-connect.html#objective-of-the-lab" class="sidebar-link">Objective of the lab:</a></li><li class="sidebar-sub-header"><a href="/kube_labs/lab/lab-dev-spaces-connect.html#prerequisites" class="sidebar-link">Prerequisites</a></li><li class="sidebar-sub-header"><a href="/kube_labs/lab/lab-dev-spaces-connect.html#_1-deploy-the-sample-application" class="sidebar-link">1. Deploy the sample application</a></li><li class="sidebar-sub-header"><a href="/kube_labs/lab/lab-dev-spaces-connect.html#_2-visit-the-currently-running-application" class="sidebar-link">2. Visit the currently running application</a></li><li class="sidebar-sub-header"><a href="/kube_labs/lab/lab-dev-spaces-connect.html#_3-modify-the-source-code-of-your-current-application" class="sidebar-link">3. Modify the source code of your current application</a></li><li class="sidebar-sub-header"><a href="/kube_labs/lab/lab-dev-spaces-connect.html#_4-configure-aks-to-redirect-to-your-developer-machine" class="sidebar-link">4. Configure AKS to redirect to your developer machine</a></li><li class="sidebar-sub-header"><a href="/kube_labs/lab/lab-dev-spaces-connect.html#what-we-ve-seen" class="sidebar-link">What we've seen</a></li><li class="sidebar-sub-header"><a href="/kube_labs/lab/lab-dev-spaces-connect.html#learn-more" class="sidebar-link">Learn more</a></li></ul></li><li><a href="/kube_labs/blog/tip256.html" class="sidebar-link">Tip 256 - Using Application Gateway Ingress Controller with Azure Kubernetes Service (AKS)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/kube_labs/blog/tip255.html" class="sidebar-link">Tip 255 - What's Azure Private Link and how can I get started?</a></li><li><a href="/kube_labs/lab/lab.html" class="sidebar-link">/lab/lab.html</a></li></ul></div></li></ul> </div> <div class="page" data-v-e0004534> <div class="content__default" data-v-e0004534><p>::: tip</p> <p>🔥  The FREE Azure Developer Guide eBook is now <a href="http://aka.ms/azuredevebook" target="_blank" rel="noopener noreferrer">available!<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>💡 Learn more : <a href="https://docs.microsoft.com/azure/frontdoor/waf-overview?WT.mc_id=docs-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">Azure Front Door WAF overview<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>📺 Watch the video : <a href="https://www.youtube.com/watch?v=CLOgyQFrrZY&amp;list=PLLasX02E8BPCNCK8Thcxu-Y-XcBUbhFWC&amp;index=4&amp;t=0s?WT.mc_id=youtube-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">How to use WAF to protect your web applications with Azure Front Door<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>:::</p> <h2 id="securing-your-application-with-a-web-application-firewall-waf"><a href="#securing-your-application-with-a-web-application-firewall-waf" class="header-anchor">#</a> Securing your application with a Web Application Firewall (WAF)</h2> <p>When you run an application on the web, it is going to be attacked. Your website will be attacked with SQL Injection attacks, Cross-site scripting attacks and every other attack in the <a href="https://www.owasp.org/index.php/Category:OWASP_Top_Ten_Project" target="_blank" rel="noopener noreferrer">OWASP top 10<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and beyond.
You need to protect your application from these attacks and you can do that with Azure <a href="https://docs.microsoft.com/azure/frontdoor/waf-overview?WT.mc_id=docs-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">Web Application Firewall<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and <a href="https://azure.microsoft.com/services/frontdoor/?WT.mc_id=azure-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">Azure Front Door<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>In <a href="https://microsoft.github.io/AzureTipsAndTricks/blog/tip192.html?WT.mc_id=code-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">Azure Tip 192<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, you have learned how to make your website more available and performant with Azure Front Door. In this post, we'll add a Web Application Firewall to protect Azure Front Door and the websites that it serves.</p> <h4 id="prerequisites"><a href="#prerequisites" class="header-anchor">#</a> Prerequisites</h4> <p>If you want to follow along, you'll need the following:</p> <ul><li>An Azure subscription (If you don't have an Azure subscription, create a <a href="https://azure.microsoft.com/free/?WT.mc_id=azure-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">free account<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> before you begin)</li> <li>An Azure Front Door that is configured to route traffic to web applications. Follow <a href="https://microsoft.github.io/AzureTipsAndTricks/blog/tip192.html?WT.mc_id=code-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">Azure Tips and Tricks 192<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to set it up</li></ul> <h4 id="configure-waf-to-protect-applications-with-azure-front-door"><a href="#configure-waf-to-protect-applications-with-azure-front-door" class="header-anchor">#</a> Configure WAF to protect applications with Azure Front Door</h4> <p>Before we create the Web Application Firewall (WAF), I want to show you what an attack could look like. Suppose that my website takes a querystring parameter and does something meaningful with it, like store it in the database. I could create an URL like this to inject a malicious script:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>https://frontdoortipsandtricks.azurefd.net/?&lt;script&gt;alert('do something evil')&lt;/script&gt; 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>When I try this on the website that Front Door is serving, without the WAF, the request will go through to the server, which serves the webpage, like normal. Although now, the malicious script is stored in my database.</p> <img src="/kube_labs/files/46beforewaf.png"> <p>(Attack not blocked)</p> <p>Web Application Firewall (WAF) can protect your web application against attacks. Let's create one for our Azure Front Door to protect our web application.</p> <ol><li><p>Go to the <a href="https://portal.azure.com/?WT.mc_id=azure-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">Azure portal<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p>Click the <strong>Create a resource</strong> button (the plus-sign in the top left corner)</p></li> <li><p>Search for <strong>Web Application Firewall</strong> and click on the result to start creating a Web Application Firewall.</p> <ol><li>This brings you to the create wizard of Web Application Firewall</li> <li>Select a <strong>Resource Group</strong></li> <li>Fill in a <strong>Policy Name</strong></li></ol> <img src="/kube_labs/files/46createwaf1.png"> <p>(Create a WAF policy Basics)</p> <ol start="4"><li>Click <strong>Next: Policy settings</strong></li> <li>Set the <strong>Mode</strong> to <strong>Prevention</strong>. This will block attacks, rather than just detect and log them</li> <li>Click <strong>Next: Managed rules</strong></li> <li>Review the rules that are enabled by default. You can enable more, but you don't have to. <strong>Click Next: Custom rules</strong></li></ol> <img src="/kube_labs/files/46selectrules.png"> <p>(Create a WAF policy Managed Rules)</p> <ol start="8"><li>You can add your own rules to detect or prevent attacks. You can create custom rules to filter on IP addresses, block or allow requests from geographic regions, block or allow requests of certain sizes and verbs (such as GET, PUT, HEAD) and more. Don't add one at this time and click <strong>Next: Association</strong></li> <li>Click <strong>Add frontend host</strong></li> <li>Select the existing Azure Front Door and click <strong>Add</strong></li></ol> <img src="/kube_labs/files/46associatefrontdoor.png"> <p>(Create a WAF policy Association)</p> <ol start="11"><li>Click <strong>Review + create</strong> and <strong>Create</strong> after that. This will create the WAF and enable it for the Azure Front Door that we selected</li></ol></li></ol> <p>That's it! The web application is now protected by the Web Application Firewall. Try the URL with the malicious script again. The request will be blocked like in the image below.</p> <img src="/kube_labs/files/afterwaf.png"> <p>(Attack blocked by WAF)</p> <p>If you look closely, you see that the title of the web page has changed into <strong>Microsoft</strong>. The attack doesn't reach your web application. It is blocked at the edge of the Azure cloud, before it can do any harm.</p> <h4 id="conclusion"><a href="#conclusion" class="header-anchor">#</a> Conclusion</h4> <p>Protecting your web application with <a href="https://docs.microsoft.com/azure/frontdoor/waf-overview?WT.mc_id=docs-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">Azure Web Application Firewall<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> in front of <a href="https://azure.microsoft.com/services/frontdoor/?WT.mc_id=azure-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">Azure Front Door<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is really powerful. Out-of-the-box, you are protected against hundreds of different common attacks. You can also enable rules to protect your application against bots. And you can also create your <a href="https://docs.microsoft.com/azure/frontdoor/waf-front-door-custom-rules?WT.mc_id=docs-azuredevtips-micrum" target="_blank" rel="noopener noreferrer">own, custom, protection rules<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ranging from IP filters to rate limits. Go check it out!</p> <h2 id="bonus-live-streaming-software-development"><a href="#bonus-live-streaming-software-development" class="header-anchor">#</a> BONUS: Live streaming software development</h2> <p>On a side note - If you like Azure Tips and Tricks, then you might enjoy another project that I'm working on for live streaming. Check out my channel below and hit the follow button to know when I'm live.</p> <iframe src="https://player.twitch.tv/?channel=mbcrump" frameborder="0" allowfullscreen="allowfullscreen" scrolling="no" height="378" width="620"></iframe><a href="https://www.twitch.tv/mbcrump?tt_content=text_link&amp;tt_medium=live_embed" style="padding:2px 0px 4px;display:block;width:345px;font-weight:normal;font-size:10px;text-decoration:underline;">Watch live video from mbcrump on www.twitch.tv</a></div> <div class="page-edit" data-v-e0004534><div class="edit-link" data-v-e0004534><a href="https://github.com/danielmeixner/kube_labs/edit/master/blog/tip254.md" target="_blank" rel="noopener noreferrer" data-v-e0004534>Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound" data-v-e0004534 data-v-e0004534><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <section class="share" data-v-e0004534><h2 data-v-e0004534>Share</h2> <a href="https://twitter.com/intent/tweet?text=Tip 254 - Use WAF to protect your web applications with Azure Front Door by @mbcrump undefined/blog/tip254.html" target="_blank" class="share__button" data-v-e0004534><i class="fab fa-twitter" data-v-e0004534></i> Tweet
    </a></section></div> <!----></div> <!----> </div> <!----></div><div class="global-ui"></div></div>
    <script src="/kube_labs/assets/js/app.b33a5d98.js" defer></script><script src="/kube_labs/assets/js/3.90ca96aa.js" defer></script><script src="/kube_labs/assets/js/13.f45761f9.js" defer></script>
  </body>
</html>
